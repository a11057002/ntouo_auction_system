<!DOCTYPE HTML>
<!--
	Aerial by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>

<head>
    {% load staticfiles %}
    <meta charset="utf-8">
    <title>LogIn Pattern</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="{% static 'css/signin.css' %}" />
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <noscript>
        <link rel="stylesheet" href="{% static 'css/noscript.css' %} "/></noscript>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.11.0/firebase.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.11.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.11.0/firebase-auth.js"></script>
    <style>
        /* width */
        ::-webkit-scrollbar {
            width: 10px;
        }
    
        /* Track */
        ::-webkit-scrollbar-track {
            background: #00000000;
        }
    
        /* Handle */
        ::-webkit-scrollbar-thumb {
            background: #246E8E;
        }
    
        /* Handle on hover */
        ::-webkit-scrollbar-thumb:hover {
            background: #0F4D69;
        }
        .infoWrong{
            color : rgb(255, 0, 0);
        }
        #userData{
            text-align:center;
        }
        .field-icon {
            float: right;
            margin-left: -25px;
            margin-top: -25px;
            position: relative;
            z-index: 2;
        }
    </style>
</head>

<body id="is-preload">
    <div id="wrapper">
        <div id="bg"></div>
        <div id="overlay"></div>
        <div id="main">

            <!-- Header -->
            <header id="header">
                <!----<h1>登入</h1>
						<br>
						<label>帳號：</label><input type="text" name="my_acc"><br>
						<label>密碼：</label><input type="text" name="my_pass">
						---->
                <div>
                    <h2>註冊資料</h2>
                </div>
                <br>
                <div id="" style="overflow:auto; height:500px;">
                    <form class="w3-container" autoScroll='true' id="userData">
                        <label class="w3-text-white"><b>本名</b></label>
                        <input class="w3-input w3-border w3-light-grey" type="text" id="nameBox"placeholder="ex:Wang Siao Min" name="user_name">
                        <p class='infoWrong' id="nameAlert"></p>
                        <br>
                        <!----<label class="w3-text-white"><b>暱稱</b></label>
                        <input class="w3-input w3-border w3-light-grey" type="text">
                        <p class='infoWrong' id="ntouAlert"></p>
                        <br><--->
                        <label class="w3-text-white"><b>電話</b></label>
                        <input class="w3-input w3-border w3-light-grey" type="tel" id="telBox" placeholder="ex:0987654321" name="phone">
                        <p class='infoWrong' id="phoneAlert"></p>
                        <br>
                        <label class="w3-text-white"><b>地址</b></label>
                        <input class="w3-input w3-border w3-light-grey" type="text" id="addBox" placeholder="ex:基隆市北寧路2號" name="address">
                        <p class='infoWrong' id="addAlert"></p>
                        <br>
                        <label class="w3-text-white"><b>社群帳號</b></label>
                        <input class="w3-input w3-border w3-light-grey" type="text" id="snsBox" placeholder="ex: FB:zuck" name="contact">
                        <p class='infoWrong' id="snsAlert"></p>
                        <br>
                        <button type="button" class="w3-btn w3-blue-grey" onclick="checkdata()">提交</button>
                        <br>
                    </form>
                </div>
            </header>

            <!-- Footer -->
            <footer id="footer">
                <span class="copyright">&copy; Untitled. Design: <a href="http://html5up.net">HTML5 UP</a>.</span>
            </footer>

        </div>
    </div>
    <script>
       
        function checkdata()
        {
            var isWrong = 0;
            
            
            var name = document.getElementById("nameBox").value;
            var tele = document.getElementById("telBox").value;
            var add = document.getElementById("addBox").value;
            var sns = document.getElementById("snsBox").value;
            
            isWrong+= checkName(name);
            isWrong+= checkTelephome(tele);
            isWrong+= checkAddress(add);
            isWrong+= checkSNS(sns);
                
            console.log("isWrong= "+isWrong);
            
            if (isWrong > 0) {
                window.alert("資料有誤 請檢查");
                console.log("資料有誤");
            }
            else {
                $.post('{% url "post-signup" %}', {'name': name, 'phone': tele, 'address': add, 'contact': sns}, function(response) {
                    location.href = '{% url "index" %}';
                });
            }
        }
       
        function checkName(name)
        {
            var nameErr = document.getElementById("nameAlert");
            if(name == "")
            {
                nameErr.innerText = "名字不能為空白";
                return 1;
            }
            else
            {
                nameErr.innerText = "";
                return 0;
            }
        }
        function checkTelephome(tele)
        {
            var passErr2 = document.getElementById("phoneAlert");
            var numbers = /^[0-9]+$/;
            if(tele.match(numbers))
            {
                passErr2.innerText = "";
                return 0;
            }
            else
            {
                passErr2.innerText = "請輸入正確的電話號碼";
                return 1;
            }
        }
        function checkAddress(add)
        {
            var addErr = document.getElementById("addAlert");
            if(add == "")
            {
                addErr.innerText = "地址不能為空白";
                return 1;
            }
            else
            {
                addErr.innerText = "";
                return 0;
            }
        }
        function checkSNS(sns)
        {
            var snsErr = document.getElementById("snsAlert");
            if(sns == "")
            {
                snsErr.innerText = "SNS不能為空白";
                return 1;
            }
            else
            {
                snsErr.innerText = "";
                return 0;
            }
        }
        
    </script>
</body> 
</html>